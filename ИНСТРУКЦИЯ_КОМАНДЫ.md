# Инструкция: Команды для работы с проектом

## 1. Как запушить на Docker Hub

### Шаг 1: Авторизация в Docker Hub

```bash
docker login
```

Введите ваши учетные данные Docker Hub (username и password/token).

### Шаг 2: Пуш образа (способ 1 - через скрипт)

Используйте готовый скрипт:

```bash
push_to_dockerhub.bat ваш_username [тег]
```

**Примеры:**
```bash
# С тегом latest (по умолчанию)
push_to_dockerhub.bat amelin001

# С конкретным тегом версии
push_to_dockerhub.bat amelin001 v1.0.0

# С тегом latest (явно)
push_to_dockerhub.bat amelin001 latest
```

### Шаг 2: Пуш образа (способ 2 - вручную)

Если хотите выполнить команды вручную:

```bash
# 1. Сборка образа
docker build -t ваш_username/basnechkin-bot:latest .

# 2. Пуш образа в Docker Hub
docker push ваш_username/basnechkin-bot:latest
```

**Пример:**
```bash
docker build -t amelin001/basnechkin-bot:latest .
docker push amelin001/basnechkin-bot:latest
```

### Шаг 3: Проверка

Проверьте, что образ опубликован:
- Перейдите на https://hub.docker.com/r/ваш_username/basnechkin-bot
- Убедитесь, что образ виден в списке

---

## 2. Как закоммитить изменения

### Способ 1: Использование скрипта commit_all.bat

```bash
commit_all.bat
```

Скрипт:
- Добавит все изменения (`git add -A`)
- Покажет статус (`git status`)
- Попросит ввести сообщение коммита
- Если нажать Enter без сообщения, будет использовано сообщение по умолчанию: "Update project files"

### Способ 2: Коммит вручную через командную строку

#### 2.1. Проверка изменений
```bash
git status
```

#### 2.2. Добавление файлов
```bash
# Добавить все изменения
git add -A

# Или добавить конкретные файлы
git add src/bot.py
git add src/agent_router.py
```

#### 2.3. Создание коммита
```bash
# Простое сообщение
git commit -m "Описание изменений"

# Многострочное сообщение
git commit -m "Основное сообщение" -m "Дополнительные детали" -m "Еще детали"
```

**Примеры:**
```bash
git commit -m "Исправлена обработка басен"

git commit -m "Добавлена новая функция" -m "- Добавлена обработка заявок" -m "- Обновлена логика роутинга"
```

#### 2.4. Пуш в удаленный репозиторий (если нужно)
```bash
git push
```

### Способ 3: Коммит отдельных файлов

Если нужно закоммитить только определенные файлы:

```bash
# Добавить конкретные файлы
git add src/bot.py src/agent_router.py

# Создать коммит
git commit -m "Обновлен бот и роутер агентов"

# Отправить изменения
git push
```

---

## Типичный рабочий процесс

### 1. Внесение изменений
```bash
# Редактируете файлы в проекте
# ...
```

### 2. Проверка изменений
```bash
git status
```

### 3. Добавление и коммит
```bash
# Вариант А: через скрипт
commit_all.bat

# Вариант Б: вручную
git add -A
git commit -m "Ваше сообщение"
```

### 4. Пуш в репозиторий (если нужно)
```bash
git push
```

### 5. Пуш в Docker Hub (если нужно)
```bash
docker login
push_to_dockerhub.bat ваш_username
```

---

## Полезные команды Git

```bash
# Просмотр истории коммитов
git log

# Просмотр изменений в файлах
git diff

# Отмена изменений в файле (до git add)
git restore имя_файла

# Отмена добавления файла (после git add, до git commit)
git restore --staged имя_файла

# Просмотр удаленных веток
git branch -a

# Переключение на ветку
git checkout имя_ветки
```

---

## Примечания

- **Docker Hub**: Образ называется `basnechkin-bot`, полное имя: `ваш_username/basnechkin-bot:тег`
- **Git**: Убедитесь, что вы находитесь в нужной ветке перед коммитом
- **Сообщения коммитов**: Старайтесь писать понятные и информативные сообщения на русском или английском языке
- **Безопасность**: Файлы `.env`, `service_account.json` и другие секреты НЕ должны коммититься (проверьте `.gitignore`)

